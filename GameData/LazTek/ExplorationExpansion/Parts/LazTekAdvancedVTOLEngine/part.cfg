PART{
name = LazTekAdvancedVTOL
module = Part
author = Lazarus Luan

mesh = model.mu
scale = 1
rescaleFactor = .85

node_stack_top = 0.0, 1.85, 0.0, 0.0, 1.0, 0.0
node_attach = 0.0, 0.0, 0.7, 0.0, 0.0, -1.0

TechRequired = hypersonicFlight
entryCost = 40000
cost = 9000
category = Propulsion
subcategory = 0
title = Advanced PulseJet VTOL Engine
manufacturer = LazTek
description = Monopropellant-burning, advanced hybrid pulseJet engine contained in a 1.25m cowling, switchable between air-breathing and closed system modes for single stage to orbit spacecraft. Has vector thrust that can be switched between vertical and forward modes. 

attachRules = 1,1,0,1,1

mass = .4
dragModelType = default
maximum_drag = 0.1
minimum_drag = 0.1
angularDrag = 2
crashTolerance = 12
maxTemp = 3400

stagingIcon = LIQUID_ENGINE

EFFECTS
{
  running_closed
  {
    AUDIO
    {
      channel = Ship
      clip = sound_rocket_spurts
      volume = 0.0 0.0
      volume = 1.0 1.0
      pitch = 0.0 0.2
      pitch = 1.0 1.0
      loop = true
    }
    MODEL_MULTI_PARTICLE
    {
      modelName = Squad/FX/shockExhaust_blue
      transformName = thrustExhaust
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 0.25
      emission = 1.0 1.25
      speed = 0.0 0.5
      speed = 1.0 1.2
    }
  }
  power_open
  {
     AUDIO
     {
      channel = Ship
      clip = sound_rocket_spurts
      volume = 0.0 0.0
      volume = 1.0 1.0
      pitch = 0.0 0.2
      pitch = 1.0 1.0
      loop = true
     }
    MODEL_MULTI_PARTICLE
    {
      modelName = Squad/FX/shockExhaust_red_small
      transformName = thrustExhaust
      emission = 0.0 0.0
      emission = 0.05 0.0
      emission = 0.075 0.25
      emission = 1.0 1.25
      speed = 0.0 0.5
      speed = 1.0 1.2
    }
  }
  running_open
  {
     AUDIO
     {
      channel = Ship
      clip = sound_jet_deep
      volume = 0.0 0.0
      volume = 1.0 1.0
      pitch = 0.0 0.2
      pitch = 1.0 1.0
      loop = true
     }
  }
  engage
  {
    AUDIO
    {
      channel = Ship
      clip = sound_vent_soft
      volume = 1.0
      pitch = 2.0
      loop = false
    }
  }
  flameout
  {
    PREFAB_PARTICLE
    {
      prefabName = fx_exhaustSparks_flameout_2
      transformName = thrustTransform
      oneShot = true
    }
    AUDIO
    {
      channel = Ship
      clip = sound_explosion_low
      volume = 1.0
      pitch = 2.0
      loop = false
    }
  }
}

MODULE
{
	name = MultiModeEngine
	primaryEngineID = AirBreathing
	secondaryEngineID = ClosedCycle
}
MODULE
{
	name = ModuleEnginesFX
	engineID = AirBreathing
	directThrottleEffectName = power_open
	runningEffectName = running_open
	thrustVectorTransformName = thrustTransform
	exhaustDamage = False
	ignitionThreshold = 0.1
	minThrust = 0
	maxThrust = 210
	heatProduction = 400
	useEngineResponseTime = True
	engineAccelerationSpeed = 4.0
	engineDecelerationSpeed = 4.0
	useVelocityCurve = False
	PROPELLANT
	{
		name = MonoPropellant
		ratio = 1
		DrawGauge = True
	}
	PROPELLANT
	{
		name = IntakeAir
		ratio = 15
	}
	atmosphereCurve
 	{
		key = 0 3600
		key = 0.3 3600
		key = 1 3600
 	}
	
}
MODULE
{
	name = ModuleEnginesFX
	engineID = ClosedCycle
	runningEffectName = running_closed
	thrustVectorTransformName = thrustTransform
	exhaustDamage = False
	ignitionThreshold = 0.1
	minThrust = 0
	maxThrust = 240
	heatProduction = 400
	PROPELLANT
	{
	 	name = MonoPropellant
        	ratio = 0.9
		DrawGauge = True
	}
	atmosphereCurve
 	{
   	 key = 0 460
  	 key = 1 320
 	}
	
}


MODULE
{
	name = ModuleGimbal
	gimbalTransformName = thrustTransform
	gimbalRange = 5.0

}

MODULE
{
      name = ModuleAnimateHeat
      ThermalAnim = VTOLGlow2
}
RESOURCE
{
	name = ElectricCharge
	amount = 0
	maxAmount = 0
  	isTweakable = false
	hideFlow = true
}
MODULE
{
	name = ModuleAnimateGeneric
	animationName = VTOL
	startEventGUIName = Thrust Left
	endEventGUIName = Thrust Back
}
MODULE
{
	name = ModuleAnimateGeneric
	animationName = VTOR
	startEventGUIName = Thrust Right
	endEventGUIName = Thrust Back
}
MODULE
{
  name = ModuleResourceIntake
  resourceName = IntakeAir
  checkForOxygen = False
  area = 0.4
  intakeSpeed = 20
  intakeTransformName = Intake  
}

RESOURCE
{
 name = IntakeAir
 amount = 4.0
 maxAmount = 8.0
}
}